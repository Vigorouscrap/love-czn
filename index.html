<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è”¡çå¦®æ°¸è¿œå¹¸ç¦</title>
    <style>
        /* ---------- å…¨å±€å¥¶æ²¹ç²‰æ°›å›´ ---------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(circle at 50% 30%, #ffecf0, #ffe1e6);
            font-family: 'Quicksand', 'Segoe UI', 'Microsoft YaHei', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            /* ä¿®å¤é¢‘é—ªï¼šä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ */
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-perspective: 1000;
            perspective: 1000;
        }

        .magic-stage {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        /* ---------- SVGçˆ±å¿ƒå®¹å™¨ ---------- */
        .heart-box {
            position: relative;
            z-index: 50;
            animation: lovely-beat 1.3s infinite cubic-bezier(0.5, 0.1, 0.3, 1.5);
            transform-origin: center;
            /* ä¿®å¤é¢‘é—ªï¼šå¼ºåˆ¶GPUåŠ é€Ÿ */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .real-heart {
            width: 240px;
            height: 240px;
        }

        .real-heart svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 15px 25px rgba(255, 170, 180, 0.35));
            /* ä¿®å¤é¢‘é—ªï¼šä¼˜åŒ–æ»¤é•œæ€§èƒ½ */
            will-change: filter;
        }

        /* å¿ƒè·³åŠ¨ç”» - ä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘é‡ç»˜ */
        @keyframes lovely-beat {
            0% { transform: scale(1); }
            15% { transform: scale(1.12); }
            28% { transform: scale(1.2); }
            40% { transform: scale(1.08); }
            55% { transform: scale(1); }
            70% { transform: scale(0.98); }
            85% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        /* ---------- æ•£è½çš„æ˜Ÿæ˜Ÿ ---------- */
        .scattered-stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 20;
        }

        .star {
            position: absolute;
            color: rgba(255, 255, 255, 0.98);
            font-size: 26px;
            text-shadow: 0 0 20px #ffcfb0, 0 0 45px #ffb7b7;
            animation: float-shine 4s infinite alternate ease-in-out;
            white-space: nowrap;
            filter: drop-shadow(0 0 8px #ffc2b3);
            opacity: 0.9;
            /* ä¿®å¤é¢‘é—ªï¼šæ˜Ÿæ˜Ÿä¹Ÿå¼€å¯ç¡¬ä»¶åŠ é€Ÿ */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        .star-small {
            font-size: 18px;
            opacity: 0.85;
            text-shadow: 0 0 18px #ffe1b5;
        }

        .star-large {
            font-size: 34px;
            text-shadow: 0 0 35px #ffded4, 0 0 70px #ffb1b1;
        }

        @keyframes float-shine {
            0% { transform: translateY(0px) scale(0.95); opacity: 0.6; }
            100% { transform: translateY(-20px) scale(1.2); opacity: 1; text-shadow: 0 0 35px #ffe8cf, 0 0 80px #ffa7aa; }
        }

        /* ---------- å¼¹å¹• - é™ä½å¯†åº¦ï¼Œä¼˜åŒ–é‡å  ---------- */
        .danmaku-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 15;
            overflow: hidden;
        }

        .danmaku {
            position: absolute;
            white-space: nowrap;
            color: rgba(255, 255, 255, 0.95);
            font-size: 22px;
            font-weight: 400;
            letter-spacing: 2px;
            text-shadow: 0 0 12px rgba(255, 150, 150, 0.6);
            background: rgba(255, 235, 230, 0.2);
            padding: 6px 18px;
            border-radius: 50px;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 20px rgba(255, 200, 200, 0.2);
            animation: scrollDanmaku linear infinite;
            z-index: 15;
            font-family: 'Microsoft YaHei', 'Quicksand', sans-serif;
            pointer-events: none;
            transform: translateX(100vw);
            animation-fill-mode: forwards;
            /* ä¿®å¤é¢‘é—ªï¼šå¼¹å¹•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ */
            -webkit-transform: translateX(100vw) translateZ(0);
            transform: translateX(100vw) translateZ(0);
            will-change: transform;
        }

        .danmaku.slow { animation-duration: 30s; font-size: 20px; }  /* é€Ÿåº¦æ”¾æ…¢ */
        .danmaku.medium { animation-duration: 22s; font-size: 24px; }
        .danmaku.fast { animation-duration: 16s; font-size: 18px; }
        .danmaku.xlarge { font-size: 30px; animation-duration: 38s; background: rgba(255, 235, 225, 0.15); border: none; }

        @keyframes scrollDanmaku {
            0% { transform: translateX(100vw) translateZ(0); opacity: 0.4; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateX(-450px) translateZ(0); opacity: 0; }
        }

        /* ---------- çƒŸèŠ±ç”»å¸ƒ ---------- */
        #fireworks-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* è½æ¬¾ */
        .signature {
            position: absolute;
            bottom: 20px;
            right: 30px;
            color: #ffffff;
            font-size: 15px;
            background: rgba(255, 200, 200, 0.25);
            padding: 6px 20px;
            border-radius: 40px;
            backdrop-filter: blur(4px);
            z-index: 60;
            pointer-events: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            letter-spacing: 2px;
            text-shadow: 0 0 8px rgba(255, 100, 100, 0.4);
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        .hint-click {
            position: absolute;
            bottom: 20px;
            left: 30px;
            color: #ffffff;
            font-size: 15px;
            background: rgba(255, 200, 200, 0.25);
            padding: 6px 24px;
            border-radius: 50px;
            backdrop-filter: blur(4px);
            z-index: 60;
            pointer-events: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-shadow: 0 0 8px rgba(255, 100, 100, 0.4);
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        /* å“åº”å¼ - å°å±å¹•çˆ±å¿ƒè‡ªé€‚åº” */
        @media (max-width: 600px) {
            .real-heart { width: 180px; height: 180px; }
            .danmaku { font-size: 18px; padding: 4px 12px; }
            .danmaku.slow { font-size: 16px; }
            .danmaku.medium { font-size: 20px; }
            .danmaku.xlarge { font-size: 24px; }
        }
    </style>
</head>
<body>
    <div class="magic-stage" id="clickZone">
        <!-- SVGçˆ±å¿ƒ -->
        <div class="heart-box" id="heart">
            <div class="real-heart" style="width:240px; height:240px;">
                <svg viewBox="80 190 500 120" width="240" height="240">
                    <defs>
                        <!-- å¥¶æ²¹ç²‰æ¸å˜ -->
                        <radialGradient id="heartGradient" cx="35%" cy="30%" r="70%">
                            <stop offset="0%" stop-color="#ffe6ea"/>
                            <stop offset="60%" stop-color="#ffc1c8"/>
                            <stop offset="100%" stop-color="#ff9fad"/>
                        </radialGradient>
                        <!-- æŸ”å’Œé«˜å…‰ -->
                        <radialGradient id="highlight" cx="50%" cy="0%" r="60%">
                            <stop offset="0%" stop-color="rgba(255,255,255,0.7)"/>
                            <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
                        </radialGradient>
                    </defs>
                    <!-- ç»å…¸ä¸€ç¬”çˆ±å¿ƒè·¯å¾„ -->
                    <path 
                        d="M256 464s-176-104-176-232c0-66 54-120 120-120
                           44 0 84 24 104 60
                           20-36 60-60 104-60
                           66 0 120 54 120 120
                           0 128-176 232-176 232z"
                        fill="url(#heartGradient)"/>
                    <!-- é¡¶éƒ¨é«˜å…‰ -->
                    <ellipse cx="260" cy="160" rx="90" ry="60" fill="url(#highlight)" opacity="0.6"/>
                </svg>
            </div>
        </div>

        <!-- æ•£è½æ˜Ÿæ˜Ÿå®¹å™¨ -->
        <div class="scattered-stars" id="starField"></div>
        <!-- å¼¹å¹•å®¹å™¨ -->
        <div class="danmaku-screen" id="danmakuContainer"></div>
        <!-- çƒŸèŠ±canvas -->
        <canvas id="fireworks-canvas"></canvas>

        <!-- è£…é¥°æ–‡å­— -->
        <div class="signature">ğŸ’— è”¡çå¦®ï¼Œæ°¸è¿œå¹¸ç¦ ğŸ’—</div>
        <div class="hint-click">âœ¨ ç‚¹å‡»çˆ±å¿ƒï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ âœ¨</div>
    </div>

    <script>
        (function() {
            "use strict";

            // ---------- 1. æ•£è½çš„æ˜Ÿæ˜Ÿ ----------
            function initStars() {
                const starContainer = document.getElementById('starField');
                if (!starContainer) return;
                starContainer.innerHTML = '';

                const starCount = 20; // ç¨å¾®å‡å°‘æ˜Ÿæ˜Ÿæ•°é‡
                const w = window.innerWidth;
                const h = window.innerHeight;

                for (let i = 0; i < starCount; i++) {
                    const star = document.createElement('span');
                    star.className = 'star';
                    
                    if (i % 3 === 0) star.classList.add('star-large');
                    else if (i % 3 === 1) star.classList.add('star-small');
                    
                    const rand = Math.random();
                    if (rand < 0.33) star.innerHTML = 'â­';
                    else if (rand < 0.66) star.innerHTML = 'âœ¨';
                    else star.innerHTML = 'ğŸŒŸ';

                    let x, y;
                    const centerX = w / 2, centerY = h / 2 - 10;
                    // é¿å¼€çˆ±å¿ƒåŒºåŸŸ
                    do {
                        x = Math.random() * w;
                        y = Math.random() * h;
                    } while (Math.abs(x - centerX) < 170 && Math.abs(y - centerY) < 160);

                    star.style.left = x + 'px';
                    star.style.top = y + 'px';
                    
                    const delay = Math.random() * 5;
                    star.style.animationDelay = delay + 's';
                    star.style.animationDuration = (3 + Math.random() * 4) + 's';
                    star.style.transform = `rotate(${Math.random() * 30}deg)`;
                    
                    starContainer.appendChild(star);
                }
            }

            // ---------- 2. å¼¹å¹•ï¼ˆé™ä½å¯†åº¦ï¼Œé¿å…é‡å ï¼‰----------
            function initDanmaku() {
                const container = document.getElementById('danmakuContainer');
                if (!container) return;
                container.innerHTML = '';

                const messages = [
                    "è”¡çå¦®ï¼Œæˆ‘çˆ±ä½  ğŸ’•",
                    "è”¡çå¦®ï¼Œå¸Œæœ›ä½ ä¸€è¾ˆå­å¹¸ç¦ ğŸŒ¹",
                    "è”¡çå¦®ï¼Œä½ æ˜¯æœ€æ¸©æŸ”çš„æ˜Ÿå…‰ âœ¨",
                    "è”¡çå¦®ï¼Œæ¯å¤©éƒ½è¦å¼€å¿ƒå‘€ ğŸ°",
                    "è”¡çå¦®ï¼Œé‡è§ä½ æ˜¯å¥‡è¿¹ ğŸ€",
                    "è”¡çå¦®ï¼Œæˆ‘çš„å¥¶æ²¹å¥³å­© ğŸ¦",
                    "è”¡çå¦®ï¼Œæƒ³å’Œä½ ä¸€èµ·çœ‹æ˜Ÿæ˜Ÿ ğŸŒ ",
                    "è”¡çå¦®ï¼Œæ°¸è¿œåšä½ çš„åç›¾ ğŸ›¡ï¸",
                    "è”¡çå¦®ï¼Œè¿™ä¸–ç•Œå› ä½ è€Œç”œ ğŸ¬",
                    "è”¡çå¦®ï¼Œä½ çš„ç¬‘å®¹åƒæ˜¥é£ ğŸŒ¸",
                    "è”¡çå¦®ï¼Œé™ªä½ èµ°è¿‡æ¯ä¸ªå››å­£ ğŸ‚",
                    "è”¡çå¦®ï¼Œä½ æ˜¯å¿ƒä¹‹æ‰€å‘ ğŸ’˜",
                    "è”¡çå¦®ï¼Œè¦ä¸€ç›´å¹¸ç¦ä¸‹å» ğŸ•Šï¸",
                    "è”¡çå¦®ï¼Œæˆ‘æœ€å–œæ¬¢ä½ äº† ğŸ’—",
                    "è”¡çå¦®ï¼Œæ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾… ğŸŒ",
                    "è”¡çå¦®ï¼Œä½ æ¯”å¥¶æ²¹æ›´ç”œç¾ ğŸ§",
                    "è”¡çå¦®ï¼Œä»Šå¤©ä¹Ÿå¾ˆæƒ³ä½  ğŸ’­",
                    "è”¡çå¦®ï¼Œæˆ‘ä»¬æ°¸è¿œåœ¨ä¸€èµ· ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©",
                    "è”¡çå¦®ï¼Œæ™šå®‰å’Œæ—©å®‰ ğŸŒ™â˜€ï¸",
                    "è”¡çå¦®ï¼Œè°¢è°¢ä½ æ¥åˆ°æˆ‘èº«è¾¹ ğŸ",
                    "è”¡çå¦®ï¼Œçˆ±ä½ ä¸æ˜¯ä¸¤ä¸‰å¤© ğŸ’",
                    "è”¡çå¦®ï¼Œæƒ³å’Œä½ ç¯æ¸¸ä¸–ç•Œ âœˆï¸",
                    "è”¡çå¦®ï¼Œä½ è®©å¹³å‡¡å‘å…‰ âœ¨",
                    "è”¡çå¦®ï¼Œä¸€è¾ˆå­å®ˆæŠ¤ä½  ğŸ•¯ï¸",
                    "è”¡çå¦®ï¼Œåšä½ æ°¸è¿œçš„æ˜Ÿæ˜Ÿ â­",
                    "è”¡çå¦®ï¼Œä»Šå¤©æ¯”æ˜¨å¤©æ›´çˆ±ä½  ğŸ“ˆ",
                    "è”¡çå¦®ï¼Œæ‰€æœ‰ç¾å¥½éƒ½ç»™ä½  ğŸ",
                    "è”¡çå¦®ï¼Œä½ æ˜¯æˆ‘å¥¶æ²¹è‰²çš„æ¢¦ ğŸ¥›",
                    "è”¡çå¦®ï¼Œå¿ƒè·³éƒ½æ˜¯ä½  ğŸ’“",
                    "è”¡çå¦®ï¼Œæœ€å¥½çš„ç¥ç¦ç»™ä½  ğŸ‰"
                ];

                // é™ä½å¼¹å¹•å¯†åº¦ï¼šä»38æ¡å‡å°‘åˆ°22æ¡
                const danmakuCount = 22; 
                // çºµå‘åˆ†æˆ22ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸé«˜åº¦æ›´å¤§ï¼Œé¿å…é‡å 
                const segmentHeight = 100 / danmakuCount;

                for (let i = 0; i < danmakuCount; i++) {
                    const dan = document.createElement('div');
                    dan.className = 'danmaku';

                    const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                    dan.textContent = randomMsg;

                    const speedType = Math.random();
                    if (speedType < 0.33) dan.classList.add('slow');
                    else if (speedType < 0.66) dan.classList.add('medium');
                    else dan.classList.add('fast');
                    
                    if (Math.random() > 0.7) dan.classList.add('xlarge');

                    // çºµå‘å‡åˆ† + å¾®å°åç§»ï¼ˆåç§»é‡å‡å°ï¼Œé¿å…è¶Šç•Œé‡å ï¼‰
                    const basePos = i * segmentHeight + segmentHeight / 2; // å–æ¯ä¸ªåŒºåŸŸçš„ä¸­ç‚¹
                    const offset = (Math.random() - 0.5) * segmentHeight * 0.3; // åç§»èŒƒå›´ç¼©å°
                    let topPos = basePos + offset;
                    topPos = Math.min(95, Math.max(5, topPos)); // ä¿æŒåœ¨å±å¹•å†…
                    dan.style.top = topPos + '%';
                    
                    // å¢åŠ å»¶è¿ŸéšæœºèŒƒå›´ï¼Œè®©å¼¹å¹•æ›´åˆ†æ•£
                    const delay = Math.random() * 5; // 0-5ç§’å»¶è¿Ÿ
                    dan.style.animationDelay = delay + 's';
                    
                    dan.style.color = `rgba(255, 255, 255, ${0.92 + Math.random() * 0.08})`;
                    dan.style.background = `rgba(255, 235, 230, ${0.1 + Math.random() * 0.1})`;
                    
                    container.appendChild(dan);
                }
            }

            // ---------- 3. é‡ç½®å¸ƒå±€ ----------
            function resetLayout() {
                initStars();
                initDanmaku();
            }

            // ---------- 4. çƒŸèŠ±ç³»ç»Ÿ ----------
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            let fireworksActive = false;
            let animFrame = null;

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            const heart = document.getElementById('heart');

            function launchFireworks(e) {
                e.stopPropagation();
                let rect = heart.getBoundingClientRect();
                let x = rect.left + rect.width / 2;
                let y = rect.top + rect.height / 2;
                if (e.clientX && e.clientY) {
                    x = e.clientX;
                    y = e.clientY;
                }

                // è¿ç»­çƒŸèŠ±
                createFireworkBurst(x, y);
                setTimeout(() => { createFireworkBurst(x - 30, y - 20); }, 100);
                setTimeout(() => { createFireworkBurst(x + 40, y + 10); }, 200);
                setTimeout(() => { createFireworkBurst(x - 20, y + 40); }, 300);
                setTimeout(() => { createFireworkBurst(x + 30, y - 30); }, 400);
            }

            function createFireworkBurst(x, y) {
                const colors = ['#FFDDC4', '#FFE4D6', '#FFD9C0', '#FFC4C0', '#FFB6B9', '#FFE0B2', '#FFD2B0', '#FFEAD2'];
                const count = 65 + Math.floor(Math.random() * 45);
                for (let i = 0; i < count; i++) {
                    const angle = Math.random() * 2 * Math.PI;
                    const speed = 3.5 + Math.random() * 10;
                    const vx = Math.cos(angle) * speed * (0.6 + Math.random() * 0.6);
                    const vy = Math.sin(angle) * speed * (0.6 + Math.random() * 0.6);
                    const size = 6 + Math.random() * 14;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    particles.push({
                        x, y, vx, vy,
                        size,
                        color,
                        alpha: 0.9,
                        life: 0.95 + Math.random() * 0.2,
                        decay: 0.012 + Math.random() * 0.014,
                    });
                }

                if (!fireworksActive) {
                    fireworksActive = true;
                    animateFireworks();
                }
            }

            function animateFireworks() {
                if (!fireworksActive) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let hasAlive = false;
                for (let i = particles.length - 1; i >= 0; i--) {
                    const p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.045;
                    p.vx *= 0.992;
                    p.vy *= 0.992;
                    p.life -= p.decay;
                    p.alpha = p.life * 0.8;

                    if (p.life <= 0.02 || p.x < -50 || p.x > canvas.width + 50 || p.y < -50 || p.y > canvas.height + 50) {
                        particles.splice(i, 1);
                        continue;
                    }
                    hasAlive = true;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * p.life * 0.7, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.shadowColor = '#FFF1E0';
                    ctx.shadowBlur = 16 * p.life;
                    ctx.globalAlpha = p.alpha * 0.9;
                    ctx.fill();
                    
                    ctx.shadowBlur = 20;
                    ctx.fillStyle = '#FFFEF9';
                    ctx.globalAlpha = p.alpha * 0.4;
                    ctx.arc(p.x - 1, p.y - 1, p.size * p.life * 0.3, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.shadowBlur = 0;
                ctx.globalAlpha = 1;

                if (hasAlive) {
                    animFrame = requestAnimationFrame(animateFireworks);
                } else {
                    fireworksActive = false;
                    cancelAnimationFrame(animFrame);
                    animFrame = null;
                }
            }

            heart.addEventListener('click', launchFireworks);

            // åˆå§‹åŒ–
            window.addEventListener('load', () => {
                resetLayout();
            });

            resetLayout();

            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    resetLayout();
                }, 150);
            });
        })();
    </script>

    <noscript>
        <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; font-size:30px; text-shadow:0 0 20px #ff9e9e;">â¤ï¸ è”¡çå¦®ï¼Œæˆ‘çˆ±ä½  â¤ï¸</div>
    </noscript>
</body>
</html>